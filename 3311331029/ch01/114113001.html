<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>Geolocation Demo</title>
  <style>
    body {
      font-family: Arial;
      padding: 20px;
      background: #f3f3f3;
    }
    #box {
      background: white;
      padding: 20px;
      border-radius: 10px;
      width: 320px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    button {
      padding: 10px 15px;
      margin-top: 10px;
      cursor: pointer;
    }
    pre {
      background: #eee;
      padding: 10px;
      border-radius: 6px;
    }
  </style>
</head>
<body>

  <h2>ğŸ“ Geolocation Demo</h2>

  <div id="box">
    <p>æŒ‰ä¸‹æŒ‰éˆ•å¾Œæœƒé–‹å§‹å®šä½ï¼š</p>
    <button onclick="getLocation()">å–å¾—ç›®å‰ä½ç½®</button>
    <button onclick="startWatch()">é–‹å§‹ç›£çœ‹ä½ç½®</button>
    <button onclick="stopWatch()">åœæ­¢ç›£çœ‹</button>

    <h3>çµæœï¼š</h3>
    <pre id="output">å°šæœªé–‹å§‹å®šä½</pre>
  </div>

  <script>
    let watchId = null;

    function print(msg) {
      document.getElementById("output").textContent = msg;
    }

    function getLocation() {
      if (!("geolocation" in navigator)) {
        print("âŒ ä½ çš„ç€è¦½å™¨ä¸æ”¯æ´ geolocation");
        return;
      }

      print("â³ æ­£åœ¨å–å¾—ä½ç½®...");

      navigator.geolocation.getCurrentPosition(
        position => {
          const c = position.coords;
          print(
            `ğŸ‰ ä½ç½®å–å¾—æˆåŠŸ\n` +
            `ç·¯åº¦: ${c.latitude}\n` +
            `ç¶“åº¦: ${c.longitude}\n` +
            `ç²¾åº¦: Â±${c.accuracy} å…¬å°º\n` +
            `æµ·æ‹”: ${c.altitude}\n` +
            `æ–¹å‘: ${c.heading}\n` +
            `é€Ÿåº¦: ${c.speed}`
          );
        },
        error => {
          print("âŒ å–å¾—å¤±æ•—: " + errorMessage(error));
        }
      );
    }

    function startWatch() {
      if (watchId !== null) {
        print("âš  å·²ç¶“åœ¨ç›£çœ‹ä½ç½®äº†");
        return;
      }

      if (!("geolocation" in navigator)) {
        print("âŒ ä½ çš„ç€è¦½å™¨ä¸æ”¯æ´ geolocation");
        return;
      }

      print("â³ ç›£çœ‹ä¸­... ç§»å‹•æ‰‹æ©Ÿæœƒçœ‹åˆ°è®ŠåŒ–");

      watchId = navigator.geolocation.watchPosition(
        position => {
          const c = position.coords;
          print(
            `ğŸ“¡ ä½ç½®æ›´æ–°\n` +
            `ç·¯åº¦: ${c.latitude}\n` +
            `ç¶“åº¦: ${c.longitude}\n` +
            `ç²¾åº¦: Â±${c.accuracy} å…¬å°º\n` +
            `æ–¹å‘: ${c.heading}\n` +
            `é€Ÿåº¦: ${c.speed}`
          );
        },
        error => {
          print("âŒ ç›£çœ‹éŒ¯èª¤: " + errorMessage(error));
        }
      );
    }

    function stopWatch() {
      if (watchId !== null) {
        navigator.geolocation.clearWatch(watchId);
        watchId = null;
        print("ğŸ›‘ å·²åœæ­¢ç›£çœ‹ä½ç½®");
      } else {
        print("âš  æ²’æœ‰æ­£åœ¨ç›£çœ‹çš„ä½ç½®");
      }
    }

    function errorMessage(error) {
      switch (error.code) {
        case 1: return "ä½¿ç”¨è€…æ‹’çµ•æˆæ¬Š";
        case 2: return "ç„¡æ³•å–å¾—ä½ç½®";
        case 3: return "å®šä½é€¾æ™‚";
        default: return "æœªçŸ¥éŒ¯èª¤";
      }
    }
  </script>

</body>
</html>
